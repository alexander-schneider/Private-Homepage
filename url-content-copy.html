<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>URL Content Copy Tool | Alexander Schneider</title>
    <meta name="description" content="Laden Sie den Inhalt einer URL und kopieren Sie ihn in die Zwischenablage. Ideal für APIs, YAML-Dateien und mehr.">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="stylesheet" href="shared-tool-styles.css">
    <style>
        /* Page-specific styles for URL Content Copy */
        .url-input-group {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .url-input { flex: 1; }
        textarea { min-height: 400px; }
        #content { background: var(--hover); }

        .content-info {
            font-size: 0.875rem;
            color: var(--secondary);
            margin-left: auto;
        }

        @media (max-width: 768px) {
            .url-input-group { flex-direction: column; }
            textarea { min-height: 250px; }
            .button-container {
                flex-direction: column;
                align-items: stretch;
            }
            .content-info {
                margin-left: 0;
                text-align: center;
            }
        }

        @media (prefers-color-scheme: dark) {
            #content { background: #0a0a0a; }
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <a href="/">Zurück zur Startseite</a>
        </nav>
    </header>

    <main>
        <div class="container">
            <h1>URL Content Copy Tool</h1>
            <p class="tool-description">Laden Sie den Inhalt einer URL und kopieren Sie ihn direkt in die Zwischenablage. Perfekt für API-Dokumentationen, YAML-Dateien und mehr.</p>

            <div class="tool-content">
                <h2 class="section-title">URL eingeben</h2>
                <div class="url-input-group">
                    <input type="url" id="url-input" class="url-input" placeholder="https://api.example.com/openapi.yaml" />
                    <button id="fetch-button">Inhalt laden</button>
                </div>

                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <span>Inhalt wird geladen...</span>
                </div>

                <div class="error-message" id="error-message"></div>

                <h2 class="section-title">Inhalt</h2>
                <textarea id="content" readonly placeholder="Der Inhalt der URL erscheint hier..."></textarea>

                <div class="button-container">
                    <button id="copy-button" class="success-button" disabled>Copy URL Content</button>
                    <button id="clear-button" disabled>Leeren</button>
                    <span class="content-info" id="content-info"></span>
                </div>
            </div>

            <div class="info-section">
                <h2>Über das URL Content Copy Tool</h2>
                <p>Das URL Content Copy Tool ermöglicht es Ihnen, den Textinhalt einer beliebigen URL schnell abzurufen und in die Zwischenablage zu kopieren. Dies ist besonders nützlich für Entwickler, die mit APIs, Konfigurationsdateien oder anderen webbasierten Ressourcen arbeiten.</p>

                <h3>Funktionsweise</h3>
                <p>Geben Sie einfach die URL ein und klicken Sie auf "Inhalt laden". Das Tool ruft den Inhalt ab und zeigt ihn an. Mit einem Klick auf "Copy URL Content" wird der gesamte Inhalt in Ihre Zwischenablage kopiert.</p>
                <div class="code-example">
                    <strong>Beispiel-URLs:</strong><br>
                    https://api.example.com/openapi.yaml<br>
                    https://raw.githubusercontent.com/user/repo/main/config.json<br>
                    https://example.com/api/v1/schema.json
                </div>

                <h3>Anwendungsbereiche</h3>
                <ul>
                    <li>Abrufen von OpenAPI/Swagger-Spezifikationen</li>
                    <li>Kopieren von Konfigurationsdateien (YAML, JSON, etc.)</li>
                    <li>Laden von Schema-Definitionen</li>
                    <li>Schneller Zugriff auf Raw-Dateien von GitHub</li>
                    <li>Abrufen von API-Dokumentationen</li>
                </ul>

                <h3>Vorteile</h3>
                <ul>
                    <li>Kein manuelles Kopieren von Webseiteninhalten nötig</li>
                    <li>Direkte Zwischenablage-Integration</li>
                    <li>Unterstützt alle Textformate (YAML, JSON, XML, etc.)</li>
                    <li>Zeigt Dateigröße und Zeilenanzahl an</li>
                    <li>Funktioniert ohne Installation im Browser</li>
                </ul>

                <h3>Hinweise</h3>
                <ul>
                    <li>Die URL muss öffentlich zugänglich sein</li>
                    <li>Der Server muss CORS-Anfragen erlauben</li>
                    <li>Bei CORS-Fehlern können Sie die URL alternativ direkt im Browser öffnen</li>
                    <li>GitHub Raw-URLs funktionieren in der Regel problemlos</li>
                </ul>
            </div>
        </div>
    </main>

    <div class="copy-success" id="copy-success">Inhalt wurde kopiert</div>

    <script>
        const urlInput = document.getElementById('url-input');
        const fetchButton = document.getElementById('fetch-button');
        const copyButton = document.getElementById('copy-button');
        const clearButton = document.getElementById('clear-button');
        const content = document.getElementById('content');
        const loading = document.getElementById('loading');
        const errorMessage = document.getElementById('error-message');
        const contentInfo = document.getElementById('content-info');
        const copySuccess = document.getElementById('copy-success');

        // Allow Enter key to trigger fetch
        urlInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault();
                fetchContent();
            }
        });

        fetchButton.addEventListener('click', fetchContent);
        copyButton.addEventListener('click', copyContent);
        clearButton.addEventListener('click', clearContent);

        async function fetchContent() {
            const url = urlInput.value.trim();

            if (!url) {
                showError('Bitte geben Sie eine URL ein.');
                return;
            }

            // Basic URL validation
            try {
                new URL(url);
            } catch {
                showError('Bitte geben Sie eine gültige URL ein.');
                return;
            }

            // Reset state
            hideError();
            content.value = '';
            contentInfo.textContent = '';
            copyButton.disabled = true;
            clearButton.disabled = true;
            fetchButton.disabled = true;
            loading.classList.add('show');

            try {
                const response = await fetch(url, {
                    method: 'GET',
                    headers: {
                        'Accept': 'text/plain, application/json, application/yaml, */*'
                    }
                });

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

                const text = await response.text();

                content.value = text;
                copyButton.disabled = false;
                clearButton.disabled = false;

                // Calculate stats
                const bytes = new Blob([text]).size;
                const lines = text.split('\n').length;
                const sizeStr = bytes > 1024 ? `${(bytes / 1024).toFixed(1)} KB` : `${bytes} Bytes`;
                contentInfo.textContent = `${lines} Zeilen, ${sizeStr}`;

            } catch (err) {
                console.error('Fetch error:', err);

                if (err.message.includes('Failed to fetch') || err.message.includes('NetworkError') || err.name === 'TypeError') {
                    showError('Die URL konnte nicht geladen werden. Mögliche Ursachen: CORS-Blockierung, Netzwerkfehler oder ungültige URL. Versuchen Sie, die URL direkt im Browser zu öffnen.');
                } else {
                    showError(`Fehler beim Laden: ${err.message}`);
                }
            } finally {
                loading.classList.remove('show');
                fetchButton.disabled = false;
            }
        }

        async function copyContent() {
            if (!content.value) return;

            try {
                if (navigator.clipboard && window.isSecureContext) {
                    await navigator.clipboard.writeText(content.value);
                } else {
                    // Fallback for older browsers
                    content.select();
                    content.setSelectionRange(0, 99999);
                    document.execCommand('copy');
                    window.getSelection().removeAllRanges();
                }

                copySuccess.classList.add('show');
                setTimeout(() => {
                    copySuccess.classList.remove('show');
                }, 2000);
            } catch (err) {
                console.error('Failed to copy:', err);
                showError('Der Inhalt konnte nicht kopiert werden.');
            }
        }

        function clearContent() {
            content.value = '';
            contentInfo.textContent = '';
            copyButton.disabled = true;
            clearButton.disabled = true;
            urlInput.value = '';
            hideError();
            urlInput.focus();
        }

        function showError(message) {
            errorMessage.textContent = message;
            errorMessage.classList.add('show');
        }

        function hideError() {
            errorMessage.classList.remove('show');
        }
    </script>
</body>
</html>
